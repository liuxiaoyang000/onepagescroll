!function(a){a.fn.onepagescroll=function(b,c){function d(){l[0]?m.on("mousewheel DOMMouseScroll",function(a){var b=a.originalEvent.wheelDelta||a.originalEvent.detail,c=a.originalEvent.wheelDelta;u?(u=!1,e(b>0&&c?0:b>0&&!c?1:0>b&&c?1:0)):window.console&&console.log("violent!")}):(m.on("touchstart",function(b){for(var c=!0,d=b.srcElement,e=0,f=o.length;f>e;e++)(d.nodeName==o[e]||a(d).hasClass(o[e])||d.id==o[e])&&(c=!1);c&&(b.preventDefault(),s.sy=b.originalEvent.touches[0].pageY)}),m.on("touchmove",function(a){if(s.sy){var b=a.originalEvent.touches[0].pageY,c=b-s.sy;s.my=b,s.distance=c}}),m.on("touchend",function(a){Math.abs(s.distance)>b.disance&&(e(s.distance>0?0:1),s.sy=s.my=s.distance=0)})),a(window).on("touchstart",function(a){}),a(window).on("resize",function(){k=window.innerHeight,m.css({transform:"translateY("+-q*k+")","-moz-transform":"translateY("+-q*k+")","-webkit-transform":"translateY("+-q*k+")"})})}function e(d,e,f){var g=0,h=!1,j=function(a,c){a.animate({top:c},1e3*b.animationTime,function(){u=!0})};if(r=q,e||(d?p-1>q?q++:b.cycle?q=0:h=1:q>0?q--:b.cycle?q=p-1:h=1),g=q*-k,r==q){if(q==p-1&&d)return void(u=!0);if(0==q&&!d)return void(u=!0)}if(l[1])h?u=!0:m.css({transform:"translateY("+g+"px)","-moz-transform":"translateY("+g+"px)","-webkit-transform":"translateY("+g+"px)"}),i(m[0],function(){u=!0,a("#ddd").text("qwrqwe:"+u)});else{var o;if(e){var s=q-f;if(s>0)for(var t=f;q>t;t++)o=n.eq(t),g=-k,j(o,g);else for(var t=q;f>t;t++)o=n.eq(t),g=0,j(o,g)}else o=n.eq(r),g=-k,d||(g=0,o=n.eq(q)),j(o,g)}c&&c({index:q,viewbox:n.eq(q)})}function f(){l=g(),a("html,body").css({overflow:"hidden",width:"100%",height:"100%"}),m.css({width:"100%",height:"100%"}),n.css({width:"100%",height:"100%"}),l[1]?m.css({transform:"translateY(0)","-moz-transform":"translateY(0)","-webkit-transform":"translateY(0)",transition:"all "+b.animationTime+"s","-moz-transition":"all "+b.animationTime+"s","-webkit-transition":"all "+b.animationTime+"s"}):(b.cycle=!1,m.css({position:"relative"}),n.css({position:"absolute",top:"0"}),n.each(function(b){a(this).css("z-index",p-b)})),k=window.innerHeight,d()}function g(){var a,b=navigator.userAgent,c="pc";return b.match(/Android/i)?c="an":b.match(/BlackBerry/i)?c="bb":b.match(/iPhone|iPad|iPod/i)?c="ios":b.match(/IEMobile/i)?c="wp":b.match(/Mobile/i)&&(c="other"),a="pc"==c?h()?[1,1]:[1,0]:[0,1]}function h(){var a,b=["webkit","Moz","ms","o"],c=[],d=document.documentElement.style,e=function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})};for(a in b)c.push(e(b[a]+"-transition"));c.push(e("transition"));for(a in c)if(c[a]in d)return!0;return!1}function i(a,b){var c=function(){b(a),a.removeEventListener("webkitTransitionEnd",c,!1),a.removeEventListener("transitionend",c,!1),a.removeEventListener("MSTransitionEnd",c,!1)};a.addEventListener("webkitTransitionEnd",c,!1),a.addEventListener("transitionend",c,!1),a.addEventListener("MSTransitionEnd",c,!1)}function j(a){var b=v.index;q=a,v.index=a,r-a>0?l[1]?e(1,1):e(1,1,b):l[1]?e(0,1):e(0,1,b)}if(!b)return!1;var k,l,m=this,n=a(b.box,m),o=b.exception||[],p=n.length,q=0,r=-1,s={},t={disance:100,cycle:1,animationTime:.6},u=1,v={index:q,viewbox:n.eq(q),change:j};return b=a.extend(t,b),o.push("A"),f(),v}}(jQuery);
